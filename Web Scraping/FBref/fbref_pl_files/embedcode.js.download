{let U="7.16.0",_=navigator.webdriver&&window?.Cypress?.constructor?.name==="$Cypress"&&!!window?.Cypress?.stn,S=String.fromCharCode(...[...Array(3)].map(()=>"A".charCodeAt(0)+Math.floor(Math.random()*26))),F=["1","true"].includes(new URLSearchParams(location.search).get("stnDebug")),l=function(u,b=!0){(F||b)&&(u=[].concat(u).join(`
`).split(`
`),console.log(`%c STNVideo Embed ${F?"[Debug] ":""}[${S}] %c %s`,"background:hsl(40, 94%, 56%);font-weight:bolder;color:black","",u.join(`
 â–ª `)))},G=function(){l(`Embed Load Build: ${U}`,!0);let u="OQVmHAQ0DZmbA5TCX2SkUAiQEmgL8629",b="6XE8APeM7RZmWFx69AnQJEeFFVRN539M",L="stn-embed",d="stn-player",A="div[data-stn-player],div[data-s2n-player]",C="StnPlayer",E=document.currentScript,M=E.getAttribute("src"),I=E.host,Y=!!I,c=window,P=null;for(;c.parent!==c&&Object.getOwnPropertyNames(c.parent).includes("document");)P=c,c=c.parent;_&&P&&(c=P);let y,$,R=function({detail:e}){l("Reading Environment"),y=e[u],$=e.disconnect};if(c.addEventListener(u,R,{capture:!0}),c.dispatchEvent(new CustomEvent(u,{detail:{}})),c.removeEventListener(u,R,{capture:!0}),R=null,c!==window){if(l(["Environment","In Root: false","Master Exists: "+!!y]),y)l(["Master Already Exists","Terminating"]);else{let e=document.createElement("script");e.src=M,c.document.head.append(e);let s=function(p){l("Sending Environment"),p.detail[u]=e,p.detail.disconnect=()=>{c.removeEventListener(u,s,{capture:!0}),l("Cleanup is Completed")},Object.freeze(p.detail)};c.addEventListener(u,s,{capture:!0}),l(["Master Doesn't Exist","Creating Master in Root","Cleanup Required","Terminating"])}return}let x=y===E;if(l(["Environment","In Root: true","Master Exists: "+!!y,"I Am Master: "+x]),y&&!x){l(["I am Not Master","Terminating"]);return}$&&(l("Disconnecting Child"),$()),l(["Taking Control","Master Exists: true","I Am Master: true","Master: "+S]);let Q=function(e){l("Sending Environment"),e.detail[u]=E,Object.freeze(e.detail)};c.addEventListener(u,Q,{capture:!0}),E.setAttribute(`data-${L}`,S);let N=new EventTarget,T={originConfig:!0,pageGestureTarget:N,allPlayers:[]};c.addEventListener(b,e=>{e.detail.players=[...T.allPlayers.map(s=>"deref"in s?s.deref():s)].filter(s=>s)},{capture:!0});let q=new WeakMap,z=0;function W(e){let s=q.get(e);if(s){l(["Document Has Already Been Processed","id: "+s.id,"location: "+e.location.href]);return}s={id:++z},q.set(e,s);let p=Object.assign(Object.create(T),{pageConfig:!0}),g=function(){N.dispatchEvent(new Event("stnGesture"))};e.addEventListener("pointerdown",g,{capture:!0});let j=new MutationObserver(r=>{let a=r.flatMap(({addedNodes:o})=>[...o]).filter(o=>o.nodeType===Node.ELEMENT_NODE);a.forEach(o=>[...o.matches?.("iframe, frame")?[o]:[],...o.querySelectorAll("iframe, frame")].forEach(v=>k.call(v))),a.forEach(B),a.forEach(O)}),Z=new MutationObserver(r=>{r.filter(o=>o.attributeName===`data-${d}`).map(o=>o.target).forEach(O)});j.observe(e,{childList:!0,subtree:!0}),Z.observe(e,{subtree:!0,attributes:!0,attributeFilter:[`data-${d}`]});function J(r){let a=H(r.src);if(!a)return;let o=new URL(r.src,location.href),v=o.hostname,f=o.href,n=o.searchParams.toString().split("&").map(m=>m.split("=")).reduce((m,h)=>(m[h.slice(0,1)[0].toLowerCase()]=h.slice(1).join("="),m),{}),i=n.fk||n.sc||n.pkey||[n.sk,n.mk,n.pk].filter(m=>m).join("-");if(n.sk=i.split("-")[0],n.mk=i.split("-")[1],n.pk=i.split("-")[2],!i)return;let t;switch(a){case 1:{switch(t=r.previousElementSibling||r.parentElement,t.id){case"s2nBarker-"+n.sk:n.barker=!0;case n.mk:case"s2nEmbed-"+n.mk:case"__s2nPlayerContainerDiv":case"__s2nBrandedPlayerContainerDiv":break;default:t=null}break}case 2:{t=r;do t=t.previousElementSibling;while(t&&!t.classList.contains(`s2nPlayer-${i}`));break}case 3:{t=r;do t=t.previousElementSibling;while(t&&!t.classList.contains("s2nPlayer")&&!t.classList.contains(`k-${i}`));break}case 4:{t=r;do t=t.previousElementSibling;while(t&&!t.classList.contains("s2nFriendlyFrame")&&!t.classList.contains(`k-${i}`));break}default:return}if(!t){r.ownerDocument.querySelectorAll(`.s2nPlayer-${i}, .s2nPlayer.k-${i}, .s2nFriendlyFrame.k-${i}`).forEach(h=>{if(!h.nextElementSibling||h.nextElementSibling.nodeName!=="SCRIPT"||!h.nextElementSibling.src.includes(v)){let D=r.cloneNode();D.type="s2nLegacyEmbed",D.src=f,h.insertAdjacentElement("afterend",D)}});return}let w=!1,V;(t.getAttribute("data-type")||"").toLowerCase()==="barker"&&(w=!0),delete n.fk,delete n.sc,delete n.pkey,delete n.sk,delete n.mk,delete n.pk,w=w||!!n.size||f.includes("barker"),V=a===3||a>=4&&Object.keys(n).join().includes("float"),t&&((i.split("-")[1]||"").toLowerCase()==="full"&&(n.cid=i.split("-")[2],i=i.split("-")[0],(t.getAttribute("data-type")||"").toLowerCase()==="single"&&t.setAttribute("data-type","FULL")),Object.keys(n).forEach(m=>{t.setAttribute("data-"+m,n[m])}),t.setAttribute("data-stn-player",i),w&&t.setAttribute("data-forceBarker",""),V&&t.setAttribute("data-type","float"))}function O(r){[...r.matches?.(A)?[r]:[],...r.querySelectorAll(A)].forEach(K)}function B(r){[...r.matches?.("script")?[r]:[],...r.querySelectorAll("script")].forEach(J)}function K(r){if(s.installed!==!0){s.installed=!0;let f;try{f=new URL(`/easy-stn-player/${U}/easy-stn-player.js`,I||M.replace(/^\/\//,"https://"))}catch(t){let w=new URL(M,e.baseURI);f=new URL("easy-stn-player.js",w)}l(["Loading Player","Document ID: "+s.id,"Source: "+f.href]);let n=e.createElement("script"),i="stn-"+[...Array(2)].map(()=>Math.random().toString(36).slice(2)).join("");n.type="module",n.textContent=`
import {${C}} from '${f.href}';
document.addEventListener('${i}',({detail})=>Object.assign(${C},detail),{capture:true,once:true});
document.dispatchEvent(new Event('${i}'));
if (!customElements.get('${d}'))
{
    customElements.define('${d}',${C});
}
`,e.addEventListener(i,t=>{t.detail={config:p}},{capture:!0,once:!0}),e.head.appendChild(n),e.head.removeChild(n)}if(r.getElementsByTagName(d).length)return;let a=e.createElement(d),o=[...r.children];a.embedScriptTag=E,a.divTag=r,a.embedMutationObserver=j,a.style.display="none",a.playerKey=r.getAttribute(`data-${d}`)||r.getAttribute("data-s2n-player"),r.append(a),a.append(...o);let v;for(;v=a.closest(".s2nPlayer");)v.classList.remove("s2nPlayer")}B(e),O(e)}function X(e){[...e.querySelectorAll("iframe, frame")].forEach(s=>{s.addEventListener("load",k,{capture:!0}),k.call(s)})}function k(){this.addEventListener("load",k,{capture:!0});let e=!0,s=this.location?.href||this.src,p=new URL(window.location.href);if(navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome"))try{e=p.host===new URL(s,window.location.href).host}catch(j){e=!0}let g=null;e&&(g=this.document||this.contentDocument),g&&(W(g),X(g))}l("Scanning Root - Persistent Monitoring"),k.call(window)},H=function(u){let b=(()=>{try{return new URL(u,document.baseURI)}catch(A){return null}})();if(!b)return!1;let L=b.pathname;if(!L.match("^/(?:final|player[0-9]?)/[^?]+"))return!1;let d=L.match("/(player([2-4])?|final)");return d[1].includes("player")?d=1*(d[2]||"1"):d=0,d||!1};G()}
